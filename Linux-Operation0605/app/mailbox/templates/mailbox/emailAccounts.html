{% extends 'base_list.html' %}
{% load i18n %}
{% load static %}
{% block title %}{% trans "邮箱帐号管理" %}{% endblock %}
{% block css_block %}
<link rel="stylesheet" href="{% static 'assets/css/daterangepicker.css' %}" />
{% endblock %}
{% block breadcrumb %}
<li> {% trans "邮箱管理1221" %} </li>
<li class="active"> {% trans "邮箱帐号管理" %} </li>
{% endblock %}
{% block page-header %}邮箱账号管理{% endblock %}

{% block page-search %}
<div class="row">
    <div class="col-sm-2 max-width-200">
        <span>选择部门：</span>
        <div>
            <select  class="form-control department_choice_select"></select>
        </div>
        <!--<div style="position:relative;">-->
            <!--<input type="text" class="form-control department_choice" value="所有部门">-->
            <!--<div class="widget-box widget-color-blue2 email_box_tree" style="position:absolute;top:34px;left:0;display:none;z-index:10;min-width:230px;">-->
                <!--<div class="widget-body">-->
                    <!--<div class="widget-main padding-8">-->
                        <!--<ul id="tree1"></ul>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    </div>
    <div class="col-sm-3 max-width-240">
        <span>登录时间：</span>
        <div class="input-group">
                <span class="input-group-addon">
                    <i class="fa fa-calendar bigger-110"></i>
                </span>
            <input class="form-control" type="text" name="date-range-picker" id="id-date-range-picker-1" />

        </div>
    </div>
    <div class="col-sm-2 max-width-200">
        <span>筛选用户：</span>
        <select name="search_type" class="chosen-select form-control" id="search_con">
            <option value="1">按关键词查询</option>
            <option value="2">邮箱状态：禁用</option>
            <option value="3">邮箱状态：正常</option>
            <option value="4">邮箱空间</option>
            <option value="100">邮箱空间满-红色</option>
            <option value="101">邮箱空间即将满-橙色</option>
            <option value="5">网络硬盘空间</option>
            <option value="6">发信功能限制</option>
            <option value="7">收信功能限制</option>
            <option value="8">已用容量(MB)</option>
        </select>
    </div>
    <div class="col-sm-3 key_words max-width-200" style="padding-top:18px;padding-bottom:8px;">

        <input type="text" class="form-control" >
    </div>
    <div class="col-sm-3 email_place max-width-240" style="padding-top:18px;padding-bottom:8px;display:none;">
        <select name="search_term" style="">
            <option value="0" selected="">=</option>
            <option value="-1">&lt;</option>
            <option value="1">&gt;</option>
        </select>
        <input type="number" min="0">
    </div>
    <div class="col-sm-3 alr_place max-width-300" style="display:none">
        <span>已用容量：</span>
        <div class=" input-group">
            <input type="text" class=" form-control" name="start">
            <span class="input-group-addon">
                <i class="fa fa-exchange"></i>
                <!-- - -->
            </span>
            <input type="text" class=" form-control" name="end">
        </div>
    </div>

    <div class="col-sm-2" style="padding-top:18px;padding-bottom:8px;">

        <button class="btn btn-success btn-sm" type="button">查询</button>
    </div>
</div>
{% endblock %}
{% block page-nav %}
<a type="button" class="btn btn-primary btn-sm"  href="{% url 'mailbox_add_account' %}">添加帐号</a>
<a type="button" class="btn btn-success btn-sm"  href="{% url 'mailbox_batchadd_account' %}">批量添加帐号</a>
<a type="button" class="btn btn-info btn-sm"  href="{% url 'mailbox_batchedit_account' %}">批量修改帐号</a>
<a type="button" class="btn btn-danger btn-sm"  href="{% url 'mailbox_delete_account' %}">批量删除帐号</a>
<a type="button" class="btn btn-purple btn-sm"  href="{% url 'mailbox_backup_account' %}">导入导出帐号</a>
{% endblock %}

{% block page-table-header %}邮箱账号管理{% endblock %}


{% block page-table-action %}
<div class="row">
    <div class="col-sm-12" style="background-color: #EFF3F8;">
        <p>
            <button type="button" class="btn btn-link btn-sm" onclick="fnGetAll();">全选</button>/<button type="button" class="btn btn-link" onclick="fnGetReverse();">取消</button>
            <input type="button" class="btn btn-danger btn-sm" value="删除所选邮箱" >
            <input type="button" class="btn btn-warning btn-sm" value="禁用所选邮箱" >
            <input type="button" class="btn btn-success btn-sm" value="启用所选邮箱" >
            <input type="button" class="btn btn-info btn-sm" value="提示所选邮箱修改密码" >
            <input type="button" class="btn btn-primary btn-sm" value="提示所有邮箱修改密码" >
        </p>
    </div>
</div>
{% endblock %}

{% block page-table %}

<table id="dynamic-table" class="table table-striped table-bordered table-hover table-center" role="grid" >
    <thead>
    <tr role="row">
        <th class="sorting" tabindex="0">序号</th>
        <th class="sorting center" tabindex="0">邮箱地址</th>
        <th class="" tabindex="0" >真实姓名</th>
        <th  tabindex="0" >
            <i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
            部门
        </th>
        <th class="" tabindex="0">邮箱/网盘 容量</th>
        <th class="sorting" >已用容量</th>
        <th class="sorting" >发送/接收/POP/IMAP限制</th>
        <th>只允许登录IP</th>
        <th class="sorting" >账号状态</th>
        <th class="sorting" >最后登录时间</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
{% endblock %}

{% block page-other %}
<div class="modal fade bs-example-modal-lg" id="modal-lg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="LgModalLabel">加载中</h4>
            </div>
            <div class="modal-body">
                页面加载中
            </div>
            <div class="modal-footer">
                <button type="button" id="modal_close" class="btn btn-default hidden" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="delete_email" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">批量删除账号</h4>
            </div>
            <div class="modal-body">
                <div class="table-header">
                    批量删除邮箱
                </div>
            </div>
            <div class="modal-footer center">
                <button class="btn btn-primary" type="button">确定</button>
                <button class="btn btn-warning" type="button">重置</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="edit_email_single">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">修改信息</h4>
            </div>
            <div class="modal-body">
                <div id="edit_email_tabs">
                    <ul>
                        <li>
                            <a href="#mailbox_info">邮箱基本信息</a>
                        </li>
                        <li>
                            <a href="#user_info">用户信息</a>
                        </li>
                        <li>
                            <a href="#user_group">用户组</a>
                        </li>
                        <li>
                            <a href="#user_department">用户归属部门</a>
                        </li>
                        <li>
                            <a href="#user_belong">用户归属邮件列表</a>
                        </li>
                        <li>
                            <a href="#relation_share">关联共享邮箱列表（默认完全控制权限）</a>
                        </li>
                    </ul>
                    <div id="mailbox_info">
                        <div class="table-header" style="margin-bottom:8px;">邮箱基本信息</div>
                        <form class="form-horizontal row">
                            <div class="col-sm-6" style="border-right:2px dashed #eee;">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">邮箱名称：</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="邮箱名称" value="aaa@test.com">
                                            <span class="input-group-addon" >@test.com</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">登录密码：</label>
                                    <div class="col-sm-7">
                                        <input type="password" class="form-control" value="12345678">
                                        <p class="help-block">注：密码长度最少为8位，其中必须包括大写字母和小写字母，以及数字！</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">确认密码：</label>
                                    <div class="col-sm-7">
                                        <input type="password" class="form-control">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">密码有效开始时间：</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input class="form-control date-picker"  type="text" data-date-format="yyyy-mm-dd" />
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                        <p class="help-block">不能大于当前时间</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">密码有效期：</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="number" value="365" class="form-control" placeholder="密码有效期" >
                                            <span class="input-group-addon" >天</span>
                                        </div>
                                        <p class="help-block">0代表永远有效，大于0代表多少天密码过期后会强制用户修改密码,新增用户默认是365天</p>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">限制发送频率：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="send_hz" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl "></span>
                                        </label>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">是否打开邮箱共享：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="enable_share"   type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label"><span class="red bold">*</span>邮箱容量：</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="number" value="100" class="form-control" placeholder="限定邮箱数量" >
                                            <span class="input-group-addon" >MB(已使用0MB)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label"><span class="red bold">*</span>网络硬盘容量：</label>
                                    <div class="col-sm-7">
                                        <div class="input-group">
                                            <input type="number" value="100" class="form-control" placeholder="限定邮箱数量" >
                                            <span class="input-group-addon" >MB(已使用0MB)</span>
                                        </div>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">发信功能限制：</label>
                                    <div class="col-sm-7">
                                        <select name="limit_send" class="form-control">
                                            <option value="-1" selected="">不限制邮件发送</option>
                                            <option value="1">禁止发送所有邮件</option>
                                            <option value="2">只发送本地域邮件</option>
                                            <option value="3">可发送指定外域邮件</option>
                                            <option value="4">可发送本地所有域邮件</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">收信功能限制：</label>
                                    <div class="col-sm-7">
                                        <select name="limit_recv" class="form-control">
                                            <option value="-1" selected="">不限制邮件接收</option>
                                            <option value="1">禁此接收所有邮件</option>
                                            <option value="2">只接收本地域邮件</option>
                                            <option value="3">可接收指定外域邮件</option>
                                        </select>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">登录方式限制：</label>
                                    <div class="col-sm-7">
                                        <select name="limit_login" class="form-control">
                                            <option value="-1" selected="">不限制登录方式</option>
                                            <option value="1">禁止网页登录</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">只允许登录IP：</label>
                                    <div class="col-sm-7">
                                        <input type="text"  class="form-control" placeholder="只允许登录IP" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">邮箱帐号状态：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="limit_disabled" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">登录强制修改密码：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="change_pwd" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">POP功能：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="limit_pop" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">IMAP功能：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="limit_imap" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>
                                </div>


                            </div>









                        </form>
                    </div>
                    <div id="user_info">
                        <div class="table-header" style="margin-bottom:8px;">用户信息</div>
                        <form class="form-horizontal row">
                            <div class="col-sm-6" >
                                <div class="form-group">
                                    <label class="col-sm-4 control-label"><span class="red">*</span>姓名：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="姓名" value="白松岩">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">英文名：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="英文名" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">工号：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="工号" value="30005684">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">性别：</label>
                                    <div class="col-sm-7">
                                        <label class="radio-inline">
                                            <input type="radio" name="gender" value="1" checked> 男
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="gender" value="0" > 女
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">生日：</label>
                                    <div class="col-sm-5">
                                        <div class="input-group">
                                            <input class="form-control date-picker"  type="text" data-date-format="yyyy-mm-dd" />
                                        <span class="input-group-addon">
                                            <i class="fa fa-calendar bigger-110"></i>
                                        </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">排序权重：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="排序权重" >
                                        <p class="help-block">注：数字越大越靠前显示</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">QQ：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="QQ" >
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6" style="border-left:2px dashed #eee;">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">手机号码：</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" placeholder="手机号码" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">公司电话：</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control" placeholder="公司电话" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">分机号码：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="分机号码" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">集团号：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="集团号" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">住宅电话：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="住宅电话" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">通讯录显示：</label>
                                    <div class="col-sm-7">
                                        <label class="inline" >
                                            <input name="oabshow" checked  type="checkbox" class="ace ace-switch ace-switch-5">
                                            <span class="lbl"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">MSN：</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control" placeholder="MSN" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">备注：</label>
                                    <div class="col-sm-5">
                                        <textarea rows="4" class="form-control"></textarea>
                                    </div>
                                </div>
                            </div>






                        </form>
                    </div>
                    <div id="user_group">
                        <div class="table-header" style="margin-bottom:8px;">
                            用户组
                        </div>
                        <div>
                            <table class="table table-bordered table-center">
                                <thead>
                                    <tr>
                                        <th>序号</th>
                                        <th>组名称</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>11254654</td>
                                        <td><button class="btn btn-xs btn-danger" type="button">删除</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon">添加组：</span>
                                    <select name="" id="" class="chosen-select form-control">
                                        <option value="">选择组</option>
                                        <option value="1">12</option>
                                        <option value="12">123456</option>
                                        <option value="13">12345</option>
                                        <option value="14">123459</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-success btn-sm" type="button">添加</button>
                            </div>
                        </div>
                    </div>
                    <div id="user_department">
                        <div class="table-header" style="margin-bottom:8px;">
                            用户归属部门
                        </div>
                        <div>
                            <table class="table table-bordered table-center">
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>部门名称</th>
                                    <th>职位</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>11254654</td>
                                    <td>112187dsfsd</td>
                                    <td>
                                        <button class="btn btn-xs btn-primary" type="button">编辑</button>
                                        <button class="btn btn-xs btn-danger" type="button">删除</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon">归属部门：</span>
                                    <select class="chosen-select form-control"  data-placeholder="归属部门">
                                        <option value="">选择归属部门</option>
                                        <option value="1">test.com</option>
                                        <option value="AL">Alabama</option>
                                        <option value="AK">Alaska</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="AR">Arkansas</option>
                                        <option value="CA">California</option>
                                        <option value="CO">Colorado</option>
                                        <option value="CT">Connecticut</option>
                                        <option value="DE">Delaware</option>
                                        <option value="FL">Florida</option>
                                        <option value="GA">Georgia</option>
                                        <option value="HI">Hawaii</option>
                                        <option value="OR">Oregon</option>
                                        <option value="PA">Pennsylvania</option>
                                        <option value="RI">Rhode Island</option>
                                        <option value="SC">South Carolina</option>
                                        <option value="SD">South Dakota</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="TX">Texas</option>
                                        <option value="UT">Utah</option>
                                        <option value="VT">Vermont</option>
                                        <option value="VA">Virginia</option>
                                        <option value="WA">Washington</option>
                                        <option value="WV">West Virginia</option>
                                        <option value="WI">Wisconsin</option>
                                        <option value="WY">Wyoming</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <span class="input-group-addon">职位：</span>
                                    <input type="text" class="form-control" value="员工">
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-success btn-sm" type="button">添加</button>
                            </div>

                        </div>


                    </div>
                    <div id="user_belong">
                        <div class="table-header" style="margin-bottom:8px;">
                            用户归属邮件列表
                        </div>
                        <div>
                            <table class="table table-bordered table-center">
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>列表名称</th>
                                    <th>地址</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>1125465测试4</td>
                                    <td>112187dsfsd</td>
                                    <td>
                                        <button class="btn btn-xs btn-danger" type="button">删除</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon">归属邮件列表：</span>
                                    <select class="chosen-select form-control"  data-placeholder="归属邮件列表">
                                        <option value="">选择归属邮件列表</option>
                                        <option value="1">test.com</option>
                                        <option value="AL">Alabama</option>
                                        <option value="AK">Alaska</option>
                                        <option value="AZ">Arizona</option>
                                        <option value="AR">Arkansas</option>
                                        <option value="CA">California</option>
                                        <option value="CO">Colorado</option>
                                        <option value="CT">Connecticut</option>
                                        <option value="DE">Delaware</option>
                                        <option value="FL">Florida</option>
                                        <option value="GA">Georgia</option>
                                        <option value="HI">Hawaii</option>
                                        <option value="OR">Oregon</option>
                                        <option value="PA">Pennsylvania</option>
                                        <option value="RI">Rhode Island</option>
                                        <option value="SC">South Carolina</option>
                                        <option value="SD">South Dakota</option>
                                        <option value="TN">Tennessee</option>
                                        <option value="TX">Texas</option>
                                        <option value="UT">Utah</option>
                                        <option value="VT">Vermont</option>
                                        <option value="VA">Virginia</option>
                                        <option value="WA">Washington</option>
                                        <option value="WV">West Virginia</option>
                                        <option value="WI">Wisconsin</option>
                                        <option value="WY">Wyoming</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <span class="input-group-addon">权限：</span>
                                    <select class="form-control" >
                                        <option value="1">收发</option>
                                        <option value="0">只收</option>
                                        <option value="-1">只发</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-success btn-sm" type="button">添加</button>
                            </div>
                        </div>
                    </div>
                    <div id="relation_share">
                        <div class="table-header" style="margin-bottom:8px;">
                            关联共享邮箱列表
                        </div>
                        <div>
                            <table class="table table-bordered table-center">
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>邮箱地址</th>
                                    <th>所属域名</th>
                                    <th>权限</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>sads@test.com</td>
                                    <td>test.com</td>
                                    <td>权限</td>
                                    <td>
                                        <button class="btn btn-xs btn-danger" type="button">删除</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 no-padding-right">
                                <div class="input-group">
                                    <span class="input-group-addon">添加关联共享邮箱：</span>
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">@</span>
                                    <select name="domain" id="domain_select" class="form-control chosen-select">
                                        <option value="test.com">test.com</option>
                                        <option value="linbihuan1.com">linbihuan1.com</option>
                                        <option value="linbihuan2.com">linbihuan2.com</option>
                                        <option value="magvision.com">magvision.com</option>
                                        <option value="domain.com">domain.com</option>
                                        <option value="wsdk.com">wsdk.com</option>
                                        <option value="linbihuan-test.com">linbihuan-test.com</option>
                                        <option value="hokai.com">hokai.com</option>
                                        <option value="heqq.com">heqq.com</option>
                                        <option value="hao123.com">hao123.com</option>
                                        <option value="hhhh">hhhh</option>
                                        <option value="shfjny123.cc">shfjny123.cc</option>
                                        <option value="bbb.com">bbb.com</option>
                                        <option value="shfjny123456.cn">shfjny123456.cn</option>
                                        <option value="shfjny123456.cc">shfjny123456.cc</option>
                                        <option value="testtest.com">testtest.com</option>
                                        <option value="chinazndd.com">chinazndd.com</option>
                                        <option value="lvchichuxing.com">lvchichuxing.com</option>
                                        <option value="llzzb.gov">llzzb.gov</option>
                                        <option value="wiprocc.com.cn">wiprocc.com.cn</option>
                                        <option value="ncc-edu.com">ncc-edu.com</option>
                                        <option value="bcec.com.cn">bcec.com.cn</option>
                                        <option value="dexingroup.com">dexingroup.com</option>
                                        <option value="kylin.com.cn">kylin.com.cn</option>
                                        <option value="modousport.com">modousport.com</option>
                                        <option value="shengquanwuye.com">shengquanwuye.com</option>
                                        <option value="cufs.cc">cufs.cc</option>
                                        <option value="cufs.com.cn">cufs.com.cn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-success btn-sm" type="button">添加(默认完全控制权限)</button>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="modal-footer center">
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block my_jsblock %}
<script src="{% static 'components/datatables/media/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'components/_mod/datatables/jquery.dataTables.bootstrap.js' %}"></script>
<script src="{% static 'assets/js/date-time/moment.js' %}" ></script>
<script src="{% static 'assets/js/date-time/daterangepicker.js' %}" ></script>


<script src="{% static 'assets/js/jquery-ui.custom.js' %}" ></script>
<script src="{% static 'assets/js/jquery.ui.touch-punch.js' %}" ></script>

<script src="{% static 'assets/js/jquery-ui.js' %}" ></script>
<script>
    $('.department_choice_select').select2({
        placeholder: "搜索...",
//        allowClear: true,
        data: [
            {id: 'all', text: '所有部门'},
            {id: 'home', text: '大中华区'},
            {id: 'systemStatus/licence', text: "华南区" ,title:"child_1"},
            {id: 'systemStatus/sysinfo', text: "财务部",title:"child_2"},
            {id: 'systemStatus/status', text: 'zsh部门'},
            {id: 'domain/dynamic', text: 'zzz'},
            {id: 'domain/static', text: 'cs'},
            {id: 'mailbox/emailAccounts', text: '行政部'}
        ]
    })

    $('input[name=date-range-picker]').daterangepicker({
                'applyClass' : 'btn-sm btn-success',
                'cancelClass' : 'btn-sm btn-default',
                locale: {
                    applyLabel: '确认',
                    cancelLabel: '取消'
                }
            })

    $('.date-picker').datepicker({
                autoclose: true,
                todayHighlight: true
            })
            //show datepicker when clicking on the icon
            .next().on(ace.click_event, function(){
        $(this).prev().focus();
    });
    $('.dept_select').select2({
        placeholder: "搜索...",
//        allowClear: true,
        data: [
            {id: 'home', text: '大中华区'},
            {id: 'systemStatus/licence', text: "华南区" ,title:"child_1"},
            {id: 'systemStatus/sysinfo', text: "财务部",title:"child_2"},
            {id: 'systemStatus/status', text: 'zsh部门'},
            {id: 'domain/dynamic', text: 'zzz'},
            {id: 'domain/static', text: 'cs'},
            {id: 'mailbox/emailAccounts', text: '行政部'}
        ]
    })

    var ip_table;
    var ajax_url = "{% url 'mailbox_ajax_get_account' %}" + window.location.search;
    $(function () {
        ip_table = $('#dynamic-table').dataTable({
                    // "columnDefs": [ { "targets": [ 0 ], "visible": false, "searchable": false }],
                    bAutoWidth: false,
                    "processing": true,
                    "serverSide": true,
                    "ajax": ajax_url,
                    "aoColumns": [
                          { "bSortable": false },
                          null,
                          { "bSortable": false },
                          { "bSortable": false },
                          { "bSortable": false },
                          { "bSortable": false },
                          null,{ "bSortable": false },{ "bSortable": false },{ "bSortable": false },null,
                           ],
                    select: { style: 'multi' },
                    "drawCallback": function( settings ) {
                        $('#dynamic-table tr').click(function () {
                            if ($(this).hasClass('selected'))
                                $(this).removeClass('selected');
                            else
                                $(this).addClass('selected');
                        });
                    },
                    "iDisplayLength": 20,
                    "lengthMenu": [10, 15, 20, 50, 100, 200],
                    "aaSorting": [[1, "desc"]],
                    "oLanguage": {
                        "sLengthMenu": "{% blocktrans %}显示 _MENU_ 每页{% endblocktrans %}",
                        "sZeroRecords": "{% blocktrans %}对不起! 信息筛选结果为空!{% endblocktrans %}",
                        "sInfo": "{% blocktrans %}从 _START_ 到 _END_ 总计: _TOTAL_ 条记录{% endblocktrans %}",
                        "sInfoEmpty": "{% blocktrans %}总计: 0 条记录{% endblocktrans %}",
                        "sInfoFiltered": "{% blocktrans %}(从 _MAX_ 条记录筛选出){% endblocktrans %}",
                        "sSearch": "{% blocktrans %}搜索: {% endblocktrans %}",
                        "oPaginate": {
                            "sFirst": " {% blocktrans %}第一页{% endblocktrans %} ",
                            "sPrevious": " {% blocktrans %}上一页{% endblocktrans %} ",
                            "sNext": " {% blocktrans %}下一页{% endblocktrans %} ",
                            "sLast": " {% blocktrans %}最后一页{% endblocktrans %} "
                        }
                    },
                });

        $('#modal-lg').on('show.bs.modal', function (event) {
                $(this).removeData('bs.modal');
        })

    });
    $.fn.dataTableExt.oApi.fnGetFilteredNodes = function ( oSettings )
        {
            var anRows = [];
            //var length = oSettings._iDisplayLength > 0 ? oSettings._iDisplayLength: oSettings.aiDisplay.length;
            var length = oSettings.aiDisplay.length;
            for ( var i=0, iLen=length ; i<iLen ; i++ )
            {
                var nRow = oSettings.aoData[ oSettings.aiDisplay[i] ].nTr;
                anRows.push( nRow );
            }
            return anRows;
        };

        function fnGetAll()
        {
            var aTrs = ip_table.fnGetFilteredNodes();

            for ( var i=0 ; i<aTrs.length ; i++ )
            {
                if ( !$(aTrs[i]).hasClass('selected') )
                    $(aTrs[i]).addClass('selected');
            }
        }

        function fnGetReverse()
        {
            var aTrs = ip_table.fnGetFilteredNodes();

            for (var i=0 ; i<aTrs.length ; i++ )
            {
                if ( $(aTrs[i]).hasClass('selected') )
                {
                    $(aTrs[i]).removeClass('selected');
                }
            }
        }

        function fnGetSelected()
        {
            var aReturn = new Array();
            var aTrs = ip_table.fnGetFilteredNodes();
            for ( var i=0 ; i<aTrs.length ; i++ )
            {
                if ( $(aTrs[i]).hasClass('selected') )
                {
                    var aData = ip_table.fnGetData( aTrs[i]);
                    var iId = aData[0];
                    aReturn.push( iId );
                }
            }
            return aReturn;
        }

</script>
{% endblock %}

